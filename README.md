# Parallax

Arduino用並列処理用ライブラリ

## 概要

ParallaxはArduinoで並列処理をエミュレートするための軽量ライブラリです。  
このライブラリを使用することにより、複数のタスクを<ins>疑似的に</ins>同時に実行できます。  

## 使い方

1. ライブラリをArduinoにインストールします。
2. スケッチ内に`#include "parallax.hpp"`を追加します。  
3. グローバルスコープ内に`parallax::setupProcess()`関数を追加し、マクロを登録します。
4. `loop()`関数に`parallax::execute()`関数を追加し、マクロの実行をスケジュールします。
5. `loop()`関数の最後に`parallax::update()`関数を追加し、実行中のマクロの状態を更新します。

## APIリファレンス

### `setupProcess(name, code)`  

マクロを登録する関数です。  

- `name`: マクロの名前  
- `code`: マクロに実行させたいコード(ラムダ式)  

### `execute(task, duration)`

マクロの実行をスケジュールします。  

- `task`: `setupProcess()`で指定したマクロの名前  
- `durarion`: マクロを継続して実行させる時間(ms)  

### `update()`

スケジュールされたマクロの状態を更新します。  
**必ず`loop()`の一番最後に記載してください。**

## 注意点

- このライブラリが提供する並列処理とは、あくまで**疑似的なもの**です。  
- このライブラリが動作を保証しているのは**Teensyのみ**です。  
- millis()関数はTeensyなどの処理が高速なマイコンで実行すると**数ms単位の誤差**が発生します。  
- マクロを大量に作成すると**メモリに負荷が生じます。**
- 約50日経過すると**millis()がオーバークロックします。**

## ライセンス

このライブラリはMITライセンスの下公開されています。


## 免責

このライブラリを使用したことにより生じた損失に対し、製作者は一切の責任を負いません。  
